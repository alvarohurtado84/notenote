/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=!a.externalHost&&"download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=0,l=10,m=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,l)},n=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}}},o=function(b,i){var q,r,w,l=this,o=b.type,p=!1,s=function(){n(l,"writestart progress write writeend".split(" "))},t=function(){if((p||!q)&&(q=c().createObjectURL(b)),r)r.location.href=q;else{var d=a.open(q,"_blank");void 0==d&&"undefined"!=typeof safari&&(a.location.href=q)}l.readyState=l.DONE,s(),m(q)},u=function(a){return function(){return l.readyState!==l.DONE?a.apply(this,arguments):void 0}},v={create:!0,exclusive:!1};return l.readyState=l.INIT,i||(i="download"),e?(q=c().createObjectURL(b),d.href=q,d.download=i,f(d),l.readyState=l.DONE,s(),m(q),void 0):(a.chrome&&o&&o!==j&&(w=b.slice||b.webkitSlice,b=w.call(b,0,b.size,j),p=!0),g&&"download"!==i&&(i+=".download"),(o===j||g)&&(r=a),h?(k+=b.size,h(a.TEMPORARY,k,u(function(a){a.root.getDirectory("saved",v,u(function(a){var c=function(){a.getFile(i,v,u(function(a){a.createWriter(u(function(c){c.onwriteend=function(b){r.location.href=a.toURL(),l.readyState=l.DONE,n(l,"writeend",b),m(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&t()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=l["on"+a]}),c.write(b),l.abort=function(){c.abort(),l.readyState=l.DONE},l.readyState=l.WRITING}),t)}),t)};a.getFile(i,{create:!1},u(function(a){a.remove(),c()}),u(function(a){a.code===a.NOT_FOUND_ERR?c():t()}))}),t)}),t),void 0):(t(),void 0))},p=o.prototype,q=function(a,b){return new o(a,b)};return p.abort=function(){var a=this;a.readyState=a.DONE,n(a,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs});
